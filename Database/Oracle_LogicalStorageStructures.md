# Logical Storage Structures

## Overview of Segments

* A segment is a set of extents that contains all the data for a logical storage structure within a tablespace.

### Undo Segments

* Oracle Database maintains records of the actions of transactions, collectively known as undo data.
* Oracle Database uses undo data to do the following:
    * Roll back an active transaction
    * Recover a terminated transaction
    * Provide read consistency
    * Perform some logical flashback operations

* Oracle Database stores undo data inside the database rather than in external logs.
* Undo data is stored in blocks that are updated just like data blocks, with changes to these blocks generating redo
  records.
* In this way, Oracle Database can efficiently access undo data without needing to read external logs.

* Undo data for permanent objects is stored in an `undo tablespace`.
* Oracle Database provides a fully automated mechanism, known as `automatic undo management mode`, for managing undo
  segments and space in an undo tablespace.

* The database separates undo data into two streams(temporary and permanent). The database manages them independently.
    * A temporary undo stream encapsulates only undo records generated by changes to temporary objects.
    * A permanent undo stream encapsulates only undo records for permanent objects.

* Undo separation decreases storage and enhances performance by doing the following:
    * Enabling you to configure permanent and undo tablespace sizes that best fit the workloads for permanent and
      temporary tables.
    * Reducing the size of redo written to the online redo log.
    * Avoiding the need to back up temporary undo data.

* On an Active Data Guard instance, DML on global temporary tables requires undo to be generated in temporary undo
  segments.

## References

* [14 Logical Storage Structures](https://docs.oracle.com/en/database/oracle/oracle-database/21/cncpt/logical-storage-structures.html#GUID-13CE5EDA-8C66-4CA0-87B5-4069215A368D)